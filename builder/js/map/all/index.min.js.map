{"version":3,"sources":["all/index.min.js"],"names":["$","content","data","str","map","ele","i","type","src","img","name","info","typeName","backIndex","history","load","removeClass","setSession","value","sessionStorage","setItem","JSON","stringify","getSession","parse","getItem","init","video","chart","note","frames","other","nav","append","createNav","click","hash","test","ajax","url","complete","response","status","$iframe","html","attr","$winHeight","window","height","outerHeight","pluginsList","index","addClass","siblings","parseInt","newList","filter","length","getJSON"],"mappings":"AAAA,aAEAA,EAAE,WAkDC,SAASC,EAAQC,GAClB,IAAIC,EAAM,GAIV,OAHAD,EAAKE,IAAI,SAAUC,EAAKC,GACvBH,GAAO,0HAAiIE,EAAIE,KAAO,kCAAwCF,EAAIG,IAAM,eAAmBH,EAAII,IAAM,gJAA0JJ,EAAIG,IAAM,KAAQH,EAAIK,KAAO,kEAAsEL,EAAIM,KAAO,sIAA4IN,EAAIO,SAAW,uFAE/nBT,EAiHR,SAASU,IACRb,EAAEc,QAAQC,KAAK,IACff,EAAE,cAAcgB,YAAY,UA/J7B,IAAIC,EAAa,SAAoBP,EAAMQ,GAC1CC,eAAeC,QAAQV,EAAMW,KAAKC,UAAUJ,KAGzCK,EAAa,SAAoBb,GACpC,OAAOW,KAAKG,MAAML,eAAeM,QAAQf,KAGtCgB,GACHC,OACCpB,KAAQ,EACRG,KAAQ,MAETkB,OACCrB,KAAQ,EACRG,KAAQ,MAETmB,MACCtB,KAAQ,EACRG,KAAQ,OAEToB,QACCvB,KAAQ,EACRG,KAAQ,MAETqB,OACCxB,KAAQ,EACRG,KAAQ,QAqBV,WACC,IAAK,IAAIJ,KAAKoB,EAAM,CACnB,IAAIM,EAAMhC,EAAE,WAAcM,EAAI,eAAmBA,EAAI,KAAQoB,EAAKpB,GAAGI,KAAO,aAC5EV,EAAE,WAAWiC,OAAOD,IAJtBE,GAkBAlC,EAAE,aAAamC,MAAM,WACpBtB,MAsBD,WACC,IAAIV,EAAM,GACVH,EAAEc,QAAQY,KAAK,SAAUU,GAExB,GAAIA,EAAM,CAET,GADU,8BACFC,KAAKD,GAAO,CAEnBpC,EAAEsC,MACDC,IAAKH,EACLI,SAAU,SAAkBC,GAEH,MAApBA,EAASC,QACZ7B,OAKH,IAAI8B,EAAU3C,EAAE,iGAChBA,EAAE,iBAAiB4C,KAAK,IAAIX,OAAOU,GACnC3C,EAAE,eAAe6C,KAAK,MAAOT,GAC7B,IAAIU,EAAa9C,EAAE+C,QAAQC,SAE3B,YADAhD,EAAE,eAAegD,OAAOF,EAAa9C,EAAE,mBAAmBiD,cAAgB,IAGtEvB,EAAKU,IACTvB,IAGD,IAAIqC,EAAc3B,EAAW,WAEzB4B,EAAQzB,EAAKU,GAAM7B,KAIvB,GAFAP,EAAE,IAAMoC,GAAMgB,SAAS,UAAUC,WAAWrC,YAAY,UAEpDmC,GAA6B,IAApBG,SAASH,GACrB,IAAII,EAAUL,EAAYM,OAAO,SAAUnD,EAAKC,GAC/C,OAAOD,EAAIE,OAAS+C,SAASH,UAG9BtC,IAGAV,EADGoD,EAAQE,OACLxD,EAAQsD,GAER,+DAGFhC,EAAW,WAafpB,EAAMF,EAAQsB,EAAW,YAXzBvB,EAAE0D,QAAQ,wBAAyB,SAAUxD,GACvCA,GAGJe,EAAW,UAAWf,GACtBC,EAAMF,EAAQC,IAHdC,EAAM,0DAKPH,EAAE,iBAAiB4C,KAAKzC,KAQ3BH,EAAE,iBAAiB4C,KAAKzC,KAG1BW","file":"../../all/index.min.js","sourcesContent":["\"use strict\";\n\n$(function () {\n\t/*\r\n 动态添加属性：判断插件类型\r\n \t其它： 0\r\n \t影音： 1\r\n \t编辑器: 2\r\n \t图谱： 3\r\n \t \r\n */\n\n\t// 设置sessionStorage\n\tvar setSession = function setSession(name, value) {\n\t\tsessionStorage.setItem(name, JSON.stringify(value));\n\t};\n\t// 获取sessionStorage\n\tvar getSession = function getSession(name) {\n\t\treturn JSON.parse(sessionStorage.getItem(name));\n\t};\n\t// 初始化type类型\n\tvar init = {\n\t\t\"video\": {\n\t\t\t\"type\": 1,\n\t\t\t\"name\": \"影音\"\n\t\t},\n\t\t\"chart\": {\n\t\t\t\"type\": 2,\n\t\t\t\"name\": \"图谱\"\n\t\t},\n\t\t\"note\": {\n\t\t\t\"type\": 3,\n\t\t\t\"name\": \"编辑器\"\n\t\t},\n\t\t\"frames\": {\n\t\t\t\"type\": 4,\n\t\t\t\"name\": \"组件\"\n\t\t},\n\t\t\"other\": {\n\t\t\t\"type\": 0,\n\t\t\t\"name\": \"其它\"\n\t\t}\n\t\t/*$.getJSON('./assets/plugins.json', (data) => {\r\n  \tif(!data) {\r\n  \t\tstr = '还没有添加数据';\r\n  \t} else {\r\n  \t\tsetSession('plugins', data);\r\n  \t\tstr = content(data);\r\n  \t}\r\n  \t$('.my-container').html(str);\r\n  })*/\n\t\t// 遍历返回数据\n\t};function content(data) {\n\t\tvar str = '';\n\t\tdata.map(function (ele, i) {\n\t\t\tstr += \"<div class=\\\"col-lg-4 col-md-3 col-sm-4\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"my-plugins\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"my-images my-\" + ele.type + \"\\\"><a class=\\\"hrefIframe\\\" href=\\\"#\" + ele.src + \"\\\"><img src=\\\"\" + ele.img + \"\\\"></a></div>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"my-introduce\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"my-title\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"hrefIframe\\\" href=\\\"#\" + ele.src + \"\\\">\" + ele.name + \"</a>\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"my-info\\\">\" + ele.info + \"</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"my-classification\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"glyphicon glyphicon-list\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\" + ele.typeName + \"\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\";\n\t\t});\n\t\treturn str;\n\t}\n\t// 创建导航\n\tcreateNav();\n\tfunction createNav() {\n\t\tfor (var i in init) {\n\t\t\tvar nav = $(\"<li id=\\\"\" + i + \"\\\"><a href=\\\"#\" + i + \"\\\">\" + init[i].name + \"</a></li>\");\n\t\t\t$('.my-nav').append(nav);\n\t\t}\n\t}\n\t// 给导航添加属性\n\t/*$('.my-nav li').map((i, ele) => {\r\n \tvar type = $(ele).find('a').attr('href').substr(1);\r\n \t$(ele).attr({'id': type, 'data-type': init[type]});\r\n })*/\n\n\t// 导航点击，筛选内容列表\n\t/*$('.my-nav li').click(function() {\r\n \t$(this).addClass('active').siblings().removeClass('active');\r\n })*/\n\t// 插件库点击事件->\n\t$('.my-index').click(function () {\n\t\tbackIndex();\n\t\t//var pluginsList = getSession('plugins');\n\t\t//if(!pluginsList.length) return false;\n\t\t//var str = content(pluginsList);\n\t\t//$('.my-container').html(str);\n\t});\n\t/*$('.my-container').on('click', '.hrefIframe', (event) => {\r\n \t// var href = $(this).attr('data-href');\r\n \tvar target = event.target;\r\n \tvar href = '';\r\n \tif(target.nodeName.toLowerCase() === 'img'){\r\n \t\thref = $(target).parent().attr('data-href');\r\n \t} else {\r\n \t\thref = $(target).attr('data-href');\r\n \t}\r\n \t// console.log(href);\r\n \tif(href){\r\n \t\tvar $iframe = $('<iframe width=\"100%\" src=\"'+ hash +'\" id=\"iframeLoad\" frameborder=\"0\" scrolling=\"no\" ></iframe>');\r\n \t\t$('.my-container').html('').append($iframe);\r\n \t}\r\n })*/\n\t// 为单页面增加history路由操作;\n\tfunction history() {\n\t\tvar str = '';\n\t\t$.history.init(function (hash) {\n\n\t\t\tif (hash) {\n\t\t\t\tvar reg = /^\\.|http.*\\.html|.htm|.com/g; // 正则匹配hash是否为以点开始以html结尾;\n\t\t\t\tif (reg.test(hash)) {\n\t\t\t\t\t// 正则匹配hash是否为以点开始以html结尾;\n\t\t\t\t\t$.ajax({ // 验证链接是否有效;\n\t\t\t\t\t\turl: hash,\n\t\t\t\t\t\tcomplete: function complete(response) {\n\t\t\t\t\t\t\t// 无效返回首页;\n\t\t\t\t\t\t\tif (response.status !== 200) {\n\t\t\t\t\t\t\t\tbackIndex();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// 创建iframe添加到my-container中;\n\t\t\t\t\tvar $iframe = $('<iframe width=\"100%\" height=\"100%\" id=\"iframeLoad\" frameborder=\"0\" scrolling=\"yes\" ></iframe>');\n\t\t\t\t\t$('.my-container').html('').append($iframe);\n\t\t\t\t\t$('#iframeLoad').attr('src', hash);\n\t\t\t\t\tvar $winHeight = $(window).height();\n\t\t\t\t\t$('#iframeLoad').height($winHeight - $('.navbar-inverse').outerHeight() - 40);\n\t\t\t\t\treturn; // 终止后续执行;\n\t\t\t\t}\n\t\t\t\tif (!init[hash]) {\n\t\t\t\t\tbackIndex();\n\t\t\t\t}\n\t\t\t\t// 获取session列表\n\t\t\t\tvar pluginsList = getSession('plugins');\n\t\t\t\t// 获取type类型\n\t\t\t\tvar index = init[hash].type;\n\t\t\t\t// 清除导航active并添加当前\n\t\t\t\t$('#' + hash).addClass('active').siblings().removeClass('active');\n\t\t\t\t// 通过type类型筛选符合要求的列表\n\t\t\t\tif (index || parseInt(index) === 0) {\n\t\t\t\t\tvar newList = pluginsList.filter(function (ele, i) {\n\t\t\t\t\t\treturn ele.type === parseInt(index);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbackIndex();\n\t\t\t\t}\n\t\t\t\tif (newList.length) {\n\t\t\t\t\tstr = content(newList);\n\t\t\t\t} else {\n\t\t\t\t\tstr = '<div class=\"alert alert-danger\" role=\"alert\">暂无数据</div>';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!getSession('plugins')) {\n\t\t\t\t\t// 如果没有session，发送ajax请求\n\t\t\t\t\t$.getJSON('./assets/plugins.json', function (data) {\n\t\t\t\t\t\tif (!data) {\n\t\t\t\t\t\t\tstr = '<div class=\"alert alert-danger\" role=\"alert\">暂无数据</div>';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetSession('plugins', data);\n\t\t\t\t\t\t\tstr = content(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$('.my-container').html(str);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tstr = content(getSession('plugins'));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 将符合type要求的列表添加到my-container中;\n\t\t\t$('.my-container').html(str);\n\t\t});\n\t}\n\thistory();\n\tfunction backIndex() {\n\t\t$.history.load(''); // 返回首页\n\t\t$('.my-nav li').removeClass('active');\n\t\treturn;\n\t}\n});"]}